<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.39.20140502.0445 (20140502.0445)
 -->
<!-- Title: CanalLockStateMachine Pages: 1 -->
<svg width="722pt" height="720pt"
 viewBox="0.00 0.00 722.13 720.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(0.819672 0.819672) rotate(0) translate(4 874.4)">
<title>CanalLockStateMachine</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-874.4 877,-874.4 877,4 -4,4"/>
<!-- start_Lock_lockState -->
<g id="node1" class="node"><title>start_Lock_lockState</title>
<ellipse fill="black" stroke="black" cx="207" cy="-863.2" rx="7.2" ry="7.2"/>
</g>
<!-- Lock_lockState_BothDoorsClosedLockFull -->
<g id="node2" class="node"><title>Lock_lockState_BothDoorsClosedLockFull</title>
<path fill="none" stroke="black" d="M279,-819C279,-819 135,-819 135,-819 129,-819 123,-813 123,-807 123,-807 123,-795 123,-795 123,-789 129,-783 135,-783 135,-783 279,-783 279,-783 285,-783 291,-789 291,-795 291,-795 291,-807 291,-807 291,-813 285,-819 279,-819"/>
<text text-anchor="middle" x="207" y="-797.3" font-family="Times,serif" font-size="14.00">BothDoorsClosedLockFull</text>
</g>
<!-- start_Lock_lockState&#45;&gt;Lock_lockState_BothDoorsClosedLockFull -->
<g id="edge1" class="edge"><title>start_Lock_lockState&#45;&gt;Lock_lockState_BothDoorsClosedLockFull</title>
<g id="a_edge1"><a xlink:title="start &#160;&#45;&gt; BothDoorsClosedLockFull">
<path fill="none" stroke="black" d="M207,-855.758C207,-849.387 207,-839.197 207,-829.393"/>
<polygon fill="black" stroke="black" points="210.5,-829.105 207,-819.105 203.5,-829.105 210.5,-829.105"/>
</a>
</g>
</g>
<!-- Lock_lockState_OpeningUpperGate -->
<g id="node3" class="node"><title>Lock_lockState_OpeningUpperGate</title>
<path fill="none" stroke="black" d="M531,-732C531,-732 429,-732 429,-732 423,-732 417,-726 417,-720 417,-720 417,-708 417,-708 417,-702 423,-696 429,-696 429,-696 531,-696 531,-696 537,-696 543,-702 543,-708 543,-708 543,-720 543,-720 543,-726 537,-732 531,-732"/>
<text text-anchor="middle" x="480" y="-710.3" font-family="Times,serif" font-size="14.00">OpeningUpperGate</text>
</g>
<!-- Lock_lockState_BothDoorsClosedLockFull&#45;&gt;Lock_lockState_OpeningUpperGate -->
<g id="edge3" class="edge"><title>Lock_lockState_BothDoorsClosedLockFull&#45;&gt;Lock_lockState_OpeningUpperGate</title>
<g id="a_edge3"><a xlink:title="BothDoorsClosedLockFull boatRequestsToEnterAndGoDown &#45;&gt; OpeningUpperGate">
<path fill="none" stroke="black" d="M261.917,-782.901C306.253,-769.097 368.727,-749.645 415.451,-735.098"/>
<polygon fill="black" stroke="black" points="416.663,-738.386 425.171,-732.071 414.582,-731.703 416.663,-738.386"/>
</a>
</g>
<text text-anchor="middle" x="458" y="-753.8" font-family="Times,serif" font-size="14.00">boatRequestsToEnterAndGoDown</text>
</g>
<!-- Lock_lockState_LoweringWater -->
<g id="node6" class="node"><title>Lock_lockState_LoweringWater</title>
<path fill="none" stroke="black" d="M280.5,-471C280.5,-471 199.5,-471 199.5,-471 193.5,-471 187.5,-465 187.5,-459 187.5,-459 187.5,-447 187.5,-447 187.5,-441 193.5,-435 199.5,-435 199.5,-435 280.5,-435 280.5,-435 286.5,-435 292.5,-441 292.5,-447 292.5,-447 292.5,-459 292.5,-459 292.5,-465 286.5,-471 280.5,-471"/>
<text text-anchor="middle" x="240" y="-449.3" font-family="Times,serif" font-size="14.00">LoweringWater</text>
</g>
<!-- Lock_lockState_BothDoorsClosedLockFull&#45;&gt;Lock_lockState_LoweringWater -->
<g id="edge8" class="edge"><title>Lock_lockState_BothDoorsClosedLockFull&#45;&gt;Lock_lockState_LoweringWater</title>
<g id="a_edge8"><a xlink:title="BothDoorsClosedLockFull boatRequestsToEnterAndGoUp &#45;&gt; LoweringWater">
<path fill="none" stroke="black" d="M122.805,-797.551C65.4961,-790.845 0,-770.943 0,-715 0,-715 0,-715 0,-539 0,-501.398 106,-476.234 177.109,-463.583"/>
<polygon fill="black" stroke="black" points="178.078,-466.967 187.331,-461.807 176.879,-460.07 178.078,-466.967"/>
</a>
</g>
<text text-anchor="middle" x="89.5" y="-623.3" font-family="Times,serif" font-size="14.00">boatRequestsToEnterAndGoUp</text>
</g>
<!-- Lock_lockState_UpperGateOpen -->
<g id="node4" class="node"><title>Lock_lockState_UpperGateOpen</title>
<path fill="none" stroke="black" d="M522,-645C522,-645 438,-645 438,-645 432,-645 426,-639 426,-633 426,-633 426,-621 426,-621 426,-615 432,-609 438,-609 438,-609 522,-609 522,-609 528,-609 534,-615 534,-621 534,-621 534,-633 534,-633 534,-639 528,-645 522,-645"/>
<text text-anchor="middle" x="480" y="-623.3" font-family="Times,serif" font-size="14.00">UpperGateOpen</text>
</g>
<!-- Lock_lockState_OpeningUpperGate&#45;&gt;Lock_lockState_UpperGateOpen -->
<g id="edge5" class="edge"><title>Lock_lockState_OpeningUpperGate&#45;&gt;Lock_lockState_UpperGateOpen</title>
<g id="a_edge5"><a xlink:title="OpeningUpperGate upperGateFullyOpen &#45;&gt; UpperGateOpen">
<path fill="none" stroke="black" d="M480,-695.799C480,-684.163 480,-668.548 480,-655.237"/>
<polygon fill="black" stroke="black" points="483.5,-655.175 480,-645.175 476.5,-655.175 483.5,-655.175"/>
</a>
</g>
<text text-anchor="middle" x="539.5" y="-666.8" font-family="Times,serif" font-size="14.00">upperGateFullyOpen</text>
</g>
<!-- Lock_lockState_ClosingUpperGate -->
<g id="node5" class="node"><title>Lock_lockState_ClosingUpperGate</title>
<path fill="none" stroke="black" d="M288.5,-558C288.5,-558 191.5,-558 191.5,-558 185.5,-558 179.5,-552 179.5,-546 179.5,-546 179.5,-534 179.5,-534 179.5,-528 185.5,-522 191.5,-522 191.5,-522 288.5,-522 288.5,-522 294.5,-522 300.5,-528 300.5,-534 300.5,-534 300.5,-546 300.5,-546 300.5,-552 294.5,-558 288.5,-558"/>
<text text-anchor="middle" x="240" y="-536.3" font-family="Times,serif" font-size="14.00">ClosingUpperGate</text>
</g>
<!-- Lock_lockState_UpperGateOpen&#45;&gt;Lock_lockState_ClosingUpperGate -->
<g id="edge6" class="edge"><title>Lock_lockState_UpperGateOpen&#45;&gt;Lock_lockState_ClosingUpperGate</title>
<g id="a_edge6"><a xlink:title="UpperGateOpen boatInLockRequestingToGoDown / {...} &#45;&gt; ClosingUpperGate">
<path fill="none" stroke="black" d="M234.211,-568.316 234.026,-576.473 235.589,-584.865 241,-591 264.645,-617.814 362.809,-624.436 425.742,-625.868"/>
<polygon fill="black" stroke="black" points="237.7,-568.599 235.222,-558.298 230.735,-567.896 237.7,-568.599"/>
</a>
</g>
<text text-anchor="middle" x="356" y="-579.8" font-family="Times,serif" font-size="14.00">boatInLockRequestingToGoDown / {...}</text>
</g>
<!-- Lock_lockState_UpperGateOpen&#45;&gt;Lock_lockState_ClosingUpperGate -->
<g id="edge7" class="edge"><title>Lock_lockState_UpperGateOpen&#45;&gt;Lock_lockState_ClosingUpperGate</title>
<g id="a_edge7"><a xlink:title="UpperGateOpen after3minutes [!boatBlockingGate] &#45;&gt; ClosingUpperGate">
<path fill="none" stroke="black" d="M310.852,-542.908 370.204,-546.048 448.702,-554.312 471,-576 479.599,-584.364 481.601,-597.952 481.589,-608.854"/>
<polygon fill="black" stroke="black" points="310.918,-539.407 300.758,-542.413 310.575,-546.399 310.918,-539.407"/>
</a>
</g>
<text text-anchor="middle" x="578.5" y="-579.8" font-family="Times,serif" font-size="14.00">after3minutes [!boatBlockingGate]</text>
</g>
<!-- Lock_lockState_ClosingUpperGate&#45;&gt;Lock_lockState_BothDoorsClosedLockFull -->
<g id="edge2" class="edge"><title>Lock_lockState_ClosingUpperGate&#45;&gt;Lock_lockState_BothDoorsClosedLockFull</title>
<g id="a_edge2"><a xlink:title="ClosingUpperGate upperGateFullyClosed [!boatGoingDown] &#45;&gt; BothDoorsClosedLockFull">
<path fill="none" stroke="black" d="M208.648,-772.65 211.489,-730.266 218.269,-646.275 231,-576 232.051,-570.197 233.544,-563.936 235.012,-558.337"/>
<polygon fill="black" stroke="black" points="205.148,-772.531 207.994,-782.736 212.134,-772.984 205.148,-772.531"/>
</a>
</g>
<text text-anchor="middle" x="338" y="-666.8" font-family="Times,serif" font-size="14.00">upperGateFullyClosed [!boatGoingDown]</text>
</g>
<!-- Lock_lockState_ClosingUpperGate&#45;&gt;Lock_lockState_LoweringWater -->
<g id="edge9" class="edge"><title>Lock_lockState_ClosingUpperGate&#45;&gt;Lock_lockState_LoweringWater</title>
<g id="a_edge9"><a xlink:title="ClosingUpperGate upperGateFullyClosed [boatGoingDown] &#45;&gt; LoweringWater">
<path fill="none" stroke="black" d="M240,-521.799C240,-510.163 240,-494.548 240,-481.237"/>
<polygon fill="black" stroke="black" points="243.5,-481.175 240,-471.175 236.5,-481.175 243.5,-481.175"/>
</a>
</g>
<text text-anchor="middle" x="356.5" y="-492.8" font-family="Times,serif" font-size="14.00">upperGateFullyClosed [boatGoingDown]</text>
</g>
<!-- Lock_lockState_OpeningLowerGate -->
<g id="node8" class="node"><title>Lock_lockState_OpeningLowerGate</title>
<path fill="none" stroke="black" d="M305,-384C305,-384 201,-384 201,-384 195,-384 189,-378 189,-372 189,-372 189,-360 189,-360 189,-354 195,-348 201,-348 201,-348 305,-348 305,-348 311,-348 317,-354 317,-360 317,-360 317,-372 317,-372 317,-378 311,-384 305,-384"/>
<text text-anchor="middle" x="253" y="-362.3" font-family="Times,serif" font-size="14.00">OpeningLowerGate</text>
</g>
<!-- Lock_lockState_LoweringWater&#45;&gt;Lock_lockState_OpeningLowerGate -->
<g id="edge11" class="edge"><title>Lock_lockState_LoweringWater&#45;&gt;Lock_lockState_OpeningLowerGate</title>
<g id="a_edge11"><a xlink:title="LoweringWater waterLevelMatchesDownStream &#45;&gt; OpeningLowerGate">
<path fill="none" stroke="black" d="M242.631,-434.799C244.41,-423.163 246.799,-407.548 248.834,-394.237"/>
<polygon fill="black" stroke="black" points="252.321,-394.59 250.373,-384.175 245.401,-393.531 252.321,-394.59"/>
</a>
</g>
<text text-anchor="middle" x="340.5" y="-405.8" font-family="Times,serif" font-size="14.00">waterLevelMatchesDownStream</text>
</g>
<!-- Lock_lockState_BothDoorsClosedLockEmpty -->
<g id="node7" class="node"><title>Lock_lockState_BothDoorsClosedLockEmpty</title>
<path fill="none" stroke="black" d="M572.5,-123C572.5,-123 413.5,-123 413.5,-123 407.5,-123 401.5,-117 401.5,-111 401.5,-111 401.5,-99 401.5,-99 401.5,-93 407.5,-87 413.5,-87 413.5,-87 572.5,-87 572.5,-87 578.5,-87 584.5,-93 584.5,-99 584.5,-99 584.5,-111 584.5,-111 584.5,-117 578.5,-123 572.5,-123"/>
<text text-anchor="middle" x="493" y="-101.3" font-family="Times,serif" font-size="14.00">BothDoorsClosedLockEmpty</text>
</g>
<!-- Lock_lockState_BothDoorsClosedLockEmpty&#45;&gt;Lock_lockState_OpeningLowerGate -->
<g id="edge12" class="edge"><title>Lock_lockState_BothDoorsClosedLockEmpty&#45;&gt;Lock_lockState_OpeningLowerGate</title>
<g id="a_edge12"><a xlink:title="BothDoorsClosedLockEmpty boatRequestsToEnterAndGoUp &#45;&gt; OpeningLowerGate">
<path fill="none" stroke="black" d="M326.947,-351.056 343.824,-345.984 361.148,-339.152 376,-330 420.72,-302.443 430.648,-289.007 456,-243 477.759,-203.513 487.317,-150.473 490.998,-123.434"/>
<polygon fill="black" stroke="black" points="325.754,-347.756 317.083,-353.844 327.658,-354.493 325.754,-347.756"/>
</a>
</g>
<text text-anchor="middle" x="553.5" y="-231.8" font-family="Times,serif" font-size="14.00">boatRequestsToEnterAndGoUp</text>
</g>
<!-- Lock_lockState_RaisingWater -->
<g id="node11" class="node"><title>Lock_lockState_RaisingWater</title>
<path fill="none" stroke="black" d="M527.5,-36C527.5,-36 458.5,-36 458.5,-36 452.5,-36 446.5,-30 446.5,-24 446.5,-24 446.5,-12 446.5,-12 446.5,-6 452.5,-0 458.5,-0 458.5,-0 527.5,-0 527.5,-0 533.5,-0 539.5,-6 539.5,-12 539.5,-12 539.5,-24 539.5,-24 539.5,-30 533.5,-36 527.5,-36"/>
<text text-anchor="middle" x="493" y="-14.3" font-family="Times,serif" font-size="14.00">RaisingWater</text>
</g>
<!-- Lock_lockState_BothDoorsClosedLockEmpty&#45;&gt;Lock_lockState_RaisingWater -->
<g id="edge16" class="edge"><title>Lock_lockState_BothDoorsClosedLockEmpty&#45;&gt;Lock_lockState_RaisingWater</title>
<g id="a_edge16"><a xlink:title="BothDoorsClosedLockEmpty boatRequestsToEnterAndGoDown &#45;&gt; RaisingWater">
<path fill="none" stroke="black" d="M493,-86.799C493,-75.1626 493,-59.5479 493,-46.2368"/>
<polygon fill="black" stroke="black" points="496.5,-46.1754 493,-36.1754 489.5,-46.1755 496.5,-46.1754"/>
</a>
</g>
<text text-anchor="middle" x="591" y="-57.8" font-family="Times,serif" font-size="14.00">boatRequestsToEnterAndGoDown</text>
</g>
<!-- Lock_lockState_LowerGateOpen -->
<g id="node9" class="node"><title>Lock_lockState_LowerGateOpen</title>
<path fill="none" stroke="black" d="M296,-297C296,-297 210,-297 210,-297 204,-297 198,-291 198,-285 198,-285 198,-273 198,-273 198,-267 204,-261 210,-261 210,-261 296,-261 296,-261 302,-261 308,-267 308,-273 308,-273 308,-285 308,-285 308,-291 302,-297 296,-297"/>
<text text-anchor="middle" x="253" y="-275.3" font-family="Times,serif" font-size="14.00">LowerGateOpen</text>
</g>
<!-- Lock_lockState_OpeningLowerGate&#45;&gt;Lock_lockState_LowerGateOpen -->
<g id="edge13" class="edge"><title>Lock_lockState_OpeningLowerGate&#45;&gt;Lock_lockState_LowerGateOpen</title>
<g id="a_edge13"><a xlink:title="OpeningLowerGate lowerGateFullyOpen &#45;&gt; LowerGateOpen">
<path fill="none" stroke="black" d="M253,-347.799C253,-336.163 253,-320.548 253,-307.237"/>
<polygon fill="black" stroke="black" points="256.5,-307.175 253,-297.175 249.5,-307.175 256.5,-307.175"/>
</a>
</g>
<text text-anchor="middle" x="312.5" y="-318.8" font-family="Times,serif" font-size="14.00">lowerGateFullyOpen</text>
</g>
<!-- Lock_lockState_ClosingLowerGate -->
<g id="node10" class="node"><title>Lock_lockState_ClosingLowerGate</title>
<path fill="none" stroke="black" d="M260.5,-210C260.5,-210 161.5,-210 161.5,-210 155.5,-210 149.5,-204 149.5,-198 149.5,-198 149.5,-186 149.5,-186 149.5,-180 155.5,-174 161.5,-174 161.5,-174 260.5,-174 260.5,-174 266.5,-174 272.5,-180 272.5,-186 272.5,-186 272.5,-198 272.5,-198 272.5,-204 266.5,-210 260.5,-210"/>
<text text-anchor="middle" x="211" y="-188.3" font-family="Times,serif" font-size="14.00">ClosingLowerGate</text>
</g>
<!-- Lock_lockState_LowerGateOpen&#45;&gt;Lock_lockState_ClosingLowerGate -->
<g id="edge14" class="edge"><title>Lock_lockState_LowerGateOpen&#45;&gt;Lock_lockState_ClosingLowerGate</title>
<g id="a_edge14"><a xlink:title="LowerGateOpen boatInLockRequestingToGoUp / {...} &#45;&gt; ClosingLowerGate">
<path fill="none" stroke="black" d="M227.126,-218.954 228.834,-221.969 230.495,-225.029 232,-228 237.362,-238.582 242.533,-250.86 246.402,-260.601"/>
<polygon fill="black" stroke="black" points="230.05,-217.021 221.968,-210.171 224.014,-220.566 230.05,-217.021"/>
</a>
</g>
<text text-anchor="middle" x="345.5" y="-231.8" font-family="Times,serif" font-size="14.00">boatInLockRequestingToGoUp / {...}</text>
</g>
<!-- Lock_lockState_LowerGateOpen&#45;&gt;Lock_lockState_ClosingLowerGate -->
<g id="edge15" class="edge"><title>Lock_lockState_LowerGateOpen&#45;&gt;Lock_lockState_ClosingLowerGate</title>
<g id="a_edge15"><a xlink:title="LowerGateOpen after3minutes [!boatBlockingGate] &#45;&gt; ClosingLowerGate">
<path fill="none" stroke="black" d="M139.315,-197.765 95.3284,-202.353 44.8544,-211.192 31,-228 26.7596,-233.144 26.6685,-237.932 31,-243 52.0409,-267.618 139.139,-275.026 197.779,-277.192"/>
<polygon fill="black" stroke="black" points="139.845,-201.23 149.455,-196.769 139.161,-194.264 139.845,-201.23"/>
</a>
</g>
<text text-anchor="middle" x="129.5" y="-231.8" font-family="Times,serif" font-size="14.00">after3minutes [!boatBlockingGate]</text>
</g>
<!-- Lock_lockState_ClosingLowerGate&#45;&gt;Lock_lockState_BothDoorsClosedLockEmpty -->
<g id="edge10" class="edge"><title>Lock_lockState_ClosingLowerGate&#45;&gt;Lock_lockState_BothDoorsClosedLockEmpty</title>
<g id="a_edge10"><a xlink:title="ClosingLowerGate lowerGateFullyClosed [!boatGoingUp] &#45;&gt; BothDoorsClosedLockEmpty">
<path fill="none" stroke="black" d="M222.119,-173.736C230.339,-162.49 242.579,-148.55 257,-141 308.675,-113.945 329.311,-131.619 387,-123 388.469,-122.781 389.949,-122.558 391.438,-122.334"/>
<polygon fill="black" stroke="black" points="392.019,-125.786 401.378,-120.82 390.965,-118.865 392.019,-125.786"/>
</a>
</g>
<text text-anchor="middle" x="367.5" y="-144.8" font-family="Times,serif" font-size="14.00">lowerGateFullyClosed [!boatGoingUp]</text>
</g>
<!-- Lock_lockState_ClosingLowerGate&#45;&gt;Lock_lockState_RaisingWater -->
<g id="edge17" class="edge"><title>Lock_lockState_ClosingLowerGate&#45;&gt;Lock_lockState_RaisingWater</title>
<g id="a_edge17"><a xlink:title="ClosingLowerGate lowerGateFullyClosed [boatGoingUp] &#45;&gt; RaisingWater">
<path fill="none" stroke="black" d="M196.114,-173.76C178.821,-151.561 155.163,-112.78 176,-87 208.107,-47.2759 354.011,-29.6993 436.227,-22.8329"/>
<polygon fill="black" stroke="black" points="436.727,-26.304 446.412,-22.0097 436.163,-19.3267 436.727,-26.304"/>
</a>
</g>
<text text-anchor="middle" x="284" y="-101.3" font-family="Times,serif" font-size="14.00">lowerGateFullyClosed [boatGoingUp]</text>
</g>
<!-- Lock_lockState_RaisingWater&#45;&gt;Lock_lockState_OpeningUpperGate -->
<g id="edge4" class="edge"><title>Lock_lockState_RaisingWater&#45;&gt;Lock_lockState_OpeningUpperGate</title>
<g id="a_edge4"><a xlink:title="RaisingWater waterLevelMatchesUpStream &#45;&gt; OpeningUpperGate">
<path fill="none" stroke="black" d="M539.862,-21.6169C591.259,-25.4408 669.339,-34.3653 691,-54 708.098,-69.4986 705,-80.9231 705,-104 705,-628 705,-628 705,-628 705,-661.065 618.891,-685.75 553.213,-699.769"/>
<polygon fill="black" stroke="black" points="552.348,-696.374 543.274,-701.843 553.778,-703.226 552.348,-696.374"/>
</a>
</g>
<text text-anchor="middle" x="789" y="-362.3" font-family="Times,serif" font-size="14.00">waterLevelMatchesUpStream</text>
</g>
</g>
</svg>
